[{"filePath":"D:\\hyp\\eslint.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\hyp\\next.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\hyp\\postcss.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\hyp\\scripts\\verify_sentinel.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\hyp\\src\\app\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\hyp\\src\\app\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\hyp\\src\\components\\dashboard\\CommandInit.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AnimatePresence' is defined but never used.","line":4,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":33,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"AnimatePresence"},"fix":{"range":[67,84],"text":""},"desc":"Remove unused variable \"AnimatePresence\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Shield' is defined but never used.","line":6,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":23,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Shield"},"fix":{"range":[211,219],"text":""},"desc":"Remove unused variable \"Shield\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isBooted' is assigned a value but never used.","line":10,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setIsBooted' is assigned a value but never used.","line":10,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":33}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport { useMission, AVAILABLE_STATES, StateConfig } from \"@/context/MissionContext\";\r\nimport { Globe, Shield, Activity, ChevronRight, Terminal } from \"lucide-react\";\r\n\r\nexport default function CommandInit() {\r\n    const { activeState, setActiveState } = useMission();\r\n    const [isBooted, setIsBooted] = useState(false);\r\n\r\n    // If state is already selected, don't show this screen\r\n    if (activeState) return null;\r\n\r\n    const handleSelect = (state: StateConfig) => {\r\n        // Play boot sound effect here if possible\r\n        setActiveState(state);\r\n    };\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-50 bg-cyber-black text-white flex items-center justify-center font-mono\">\r\n            {/* Background Grid */}\r\n            <div className=\"absolute inset-0 bg-[linear-gradient(rgba(0,255,136,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(0,255,136,0.03)_1px,transparent_1px)] bg-[size:40px_40px]\" />\r\n\r\n            <div className=\"relative z-10 w-full max-w-4xl p-10\">\r\n                <motion.div\r\n                    initial={{ opacity: 0, y: 20 }}\r\n                    animate={{ opacity: 1, y: 0 }}\r\n                    transition={{ duration: 0.8 }}\r\n                    className=\"space-y-8\"\r\n                >\r\n                    {/* Header */}\r\n                    <div className=\"border-b border-electric-cyan/30 pb-4 mb-8\">\r\n                        <h1 className=\"text-4xl font-bold tracking-[0.2em] text-electric-cyan flex items-center gap-4\">\r\n                            <Terminal className=\"w-8 h-8\" />\r\n                            CODEGENESIS\r\n                        </h1>\r\n                        <p className=\"text-sm text-electric-cyan/60 mt-2 tracking-widest pl-12\">\r\n                            SPATIAL ORCHESTRATION SYSTEM v2.5\r\n                        </p>\r\n                    </div>\r\n\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-12\">\r\n                        {/* Description */}\r\n                        <div className=\"space-y-6\">\r\n                            <div className=\"flex items-center gap-3 text-matrix-green\">\r\n                                <Activity className=\"w-5 h-5 animate-pulse\" />\r\n                                <span className=\"text-sm tracking-widest\">SYSTEM ONLINE</span>\r\n                            </div>\r\n                            <p className=\"text-lg text-white/80 leading-relaxed font-light\">\r\n                                Welcome to the Neural Command Interface.\r\n                                Establish a secure uplink to a governance zone to begin\r\n                                sovereign monitoring operations.\r\n                            </p>\r\n\r\n                            <div className=\"p-4 border border-white/10 bg-white/5 rounded text-xs text-white/50 space-y-2\">\r\n                                <div className=\"flex justify-between\">\r\n                                    <span>NEURO-SYMBOLIC GATE:</span>\r\n                                    <span className=\"text-matrix-green\">ACTIVE</span>\r\n                                </div>\r\n                                <div className=\"flex justify-between\">\r\n                                    <span>BLOCKCHAIN LEDGER:</span>\r\n                                    <span className=\"text-matrix-green\">CONNECTED</span>\r\n                                </div>\r\n                                <div className=\"flex justify-between\">\r\n                                    <span>SATELLITE DOWNLINK:</span>\r\n                                    <span className=\"text-matrix-green\">STANDBY</span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* State Selection Grid */}\r\n                        <div className=\"space-y-4\">\r\n                            <h3 className=\"text-xs font-bold text-white/40 tracking-widest mb-4\">\r\n                                SELECT JURISDICTION PROTOCOL\r\n                            </h3>\r\n\r\n                            <div className=\"grid grid-cols-1 gap-3\">\r\n                                {AVAILABLE_STATES.map((state) => (\r\n                                    <motion.button\r\n                                        key={state.code}\r\n                                        whileHover={{ scale: 1.02, x: 5 }}\r\n                                        whileTap={{ scale: 0.98 }}\r\n                                        onClick={() => handleSelect(state)}\r\n                                        className=\"group relative flex items-center justify-between p-4 border border-electric-cyan/20 hover:border-electric-cyan bg-electric-cyan/5 hover:bg-electric-cyan/10 transition-all text-left\"\r\n                                    >\r\n                                        <div className=\"flex items-center gap-4\">\r\n                                            <div className=\"p-2 bg-electric-cyan/10 rounded group-hover:bg-electric-cyan/20 transition-colors\">\r\n                                                <Globe className=\"w-5 h-5 text-electric-cyan\" />\r\n                                            </div>\r\n                                            <div>\r\n                                                <div className=\"font-bold text-lg text-white group-hover:text-electric-cyan transition-colors\">\r\n                                                    {state.name}\r\n                                                </div>\r\n                                                <div className=\"text-[10px] text-white/40 tracking-widest\">\r\n                                                    SECURE UPLINK :: {state.code}\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                        <ChevronRight className=\"w-5 h-5 text-white/20 group-hover:text-electric-cyan transition-colors\" />\r\n\r\n                                        {/* Corner Accents */}\r\n                                        <div className=\"absolute top-0 right-0 w-2 h-2 border-t border-r border-electric-cyan/50 opacity-0 group-hover:opacity-100 transition-opacity\" />\r\n                                        <div className=\"absolute bottom-0 left-0 w-2 h-2 border-b border-l border-electric-cyan/50 opacity-0 group-hover:opacity-100 transition-opacity\" />\r\n                                    </motion.button>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </motion.div>\r\n\r\n                {/* Footer Status */}\r\n                <div className=\"absolute bottom-10 left-10 right-10 flex justify-between text-[10px] text-white/20 font-mono\">\r\n                    <span>V.2.5.0-ALPHA-BUILD</span>\r\n                    <span className=\"animate-pulse\">AWAITING INPUT...</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\hyp\\src\\components\\dashboard\\ComplianceDossier.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":18,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[708,711],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[708,711],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport { ShieldAlert, FileText, Gavel, X, Loader2 } from \"lucide-react\";\r\nimport { useMission } from \"@/context/MissionContext\";\r\nimport { generateFIR } from \"@/lib/governance/fir\";\r\nimport { useState } from \"react\";\r\n\r\nexport default function ComplianceDossier() {\r\n    const { activeTarget, setActiveTarget } = useMission();\r\n    const [isGenerating, setIsGenerating] = useState(false);\r\n\r\n    const handleGenerateFIR = async () => {\r\n        if (!activeTarget) return;\r\n        setIsGenerating(true);\r\n        try {\r\n            const pdfBytes = await generateFIR(activeTarget.id);\r\n            const blob = new Blob([pdfBytes as any], { type: \"application/pdf\" });\r\n            const url = URL.createObjectURL(blob);\r\n            window.open(url, \"_blank\");\r\n        } catch (e) {\r\n            console.error(\"Failed to generate FIR\", e);\r\n        }\r\n        setIsGenerating(false);\r\n    };\r\n\r\n    if (!activeTarget) return null;\r\n\r\n    return (\r\n        <AnimatePresence>\r\n            <motion.div\r\n                initial={{ x: 300, opacity: 0 }}\r\n                animate={{ x: 0, opacity: 1 }}\r\n                exit={{ x: 300, opacity: 0 }}\r\n                className=\"fixed top-16 right-6 w-96 h-[calc(100vh-6rem)] z-40 glass-panel rounded-lg overflow-hidden flex flex-col pointer-events-auto\"\r\n            >\r\n                <div className=\"p-3 border-b border-white/10 bg-white/5 flex items-center justify-between\">\r\n                    <h3 className=\"text-xs font-bold text-white tracking-widest flex items-center gap-2\">\r\n                        <ShieldAlert className=\"w-3 h-3 text-warning-amber\" /> COMPLIANCE DOSSIER\r\n                    </h3>\r\n                    <button onClick={() => setActiveTarget(null)} className=\"text-white/50 hover:text-white transition-colors\">\r\n                        <X className=\"w-4 h-4\" />\r\n                    </button>\r\n                </div>\r\n\r\n                <div className=\"flex-1 p-4 overflow-y-auto no-scrollbar space-y-6\">\r\n                    {/* Target Header */}\r\n                    <div className=\"space-y-1\">\r\n                        <div className=\"text-[9px] text-white/40 font-mono tracking-widest\">TARGET_ID</div>\r\n                        <div className=\"text-2xl font-mono text-electric-cyan font-bold break-words\">{activeTarget.id}</div>\r\n                        <div className=\"text-xs text-white/60\">{activeTarget.loc}</div>\r\n                    </div>\r\n\r\n                    {/* Evidence Grid */}\r\n                    <div className=\"grid grid-cols-2 gap-2\">\r\n                        <div className=\"aspect-square bg-black/50 border border-white/10 rounded flex items-center justify-center relative overflow-hidden group\">\r\n                            <div className=\"absolute inset-0 bg-white/5 group-hover:bg-white/10 transition-colors\" />\r\n                            <span className=\"text-[9px] text-white/30 font-mono absolute top-1 left-1\">OPTICAL_2025</span>\r\n                        </div>\r\n                        <div className=\"aspect-square bg-black/50 border border-white/10 rounded flex items-center justify-center relative overflow-hidden group\">\r\n                            <div className=\"absolute inset-0 bg-white/5 group-hover:bg-white/10 transition-colors\" />\r\n                            <span className=\"text-[9px] text-white/30 font-mono absolute top-1 left-1\">SAR_FUSION_2026</span>\r\n                            <div className=\"absolute inset-0 border-2 border-red-500/50 animate-pulse\" />\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Neuro-Symbolic Analysis */}\r\n                    <div className=\"space-y-2\">\r\n                        <div className=\"flex items-center gap-2 text-xs font-bold text-matrix-green\">\r\n                            <Gavel className=\"w-3 h-3\" /> LEGAL VIOLATION DETECTED\r\n                        </div>\r\n                        <div className=\"p-3 bg-red-500/10 border border-red-500/20 rounded text-xs text-white/80 leading-relaxed font-mono\">\r\n                            <span className=\"text-red-400 font-bold\">ACT:</span> {activeTarget.legal.act}<br />\r\n                            <span className=\"text-red-400 font-bold\">SECTION:</span> {activeTarget.legal.section}<br />\r\n                            <span className=\"text-red-400 font-bold\">SEVERITY:</span> {activeTarget.legal.severity}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Action Button */}\r\n                    <button\r\n                        onClick={handleGenerateFIR}\r\n                        disabled={isGenerating}\r\n                        className=\"w-full py-3 bg-electric-cyan/10 hover:bg-electric-cyan/20 border border-electric-cyan/50 text-electric-cyan text-xs font-bold tracking-widest uppercase transition-all flex items-center justify-center gap-2 group disabled:opacity-50\"\r\n                    >\r\n                        {isGenerating ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : <FileText className=\"w-4 h-4 group-hover:scale-110 transition-transform\" />}\r\n                        {isGenerating ? \"GENERATING...\" : \"Generate FIR (PDF)\"}\r\n                    </button>\r\n\r\n                    <div className=\"text-[9px] text-white/30 text-center font-mono break-all\">\r\n                        Immutable Record ID: {activeTarget.txHash}\r\n                    </div>\r\n                </div>\r\n            </motion.div>\r\n        </AnimatePresence>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\hyp\\src\\components\\dashboard\\SurveillanceFeed.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AlertTriangle' is defined but never used.","line":4,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":23,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"AlertTriangle"},"fix":{"range":[84,98],"text":""},"desc":"Remove unused variable \"AlertTriangle\"."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport { AlertTriangle, MapPin, Eye } from \"lucide-react\";\r\nimport { useMission } from \"@/context/MissionContext\";\r\n\r\nexport default function SurveillanceFeed() {\r\n    const { alerts, setActiveTarget } = useMission();\r\n\r\n    return (\r\n        <div className=\"fixed top-16 left-6 w-80 h-[calc(100vh-6rem)] z-40 glass-panel rounded-lg overflow-hidden flex flex-col pointer-events-auto\">\r\n            <div className=\"p-3 border-b border-white/10 bg-white/5 flex items-center justify-between\">\r\n                <h3 className=\"text-xs font-bold text-electric-cyan tracking-widest flex items-center gap-2\">\r\n                    <Eye className=\"w-3 h-3\" /> SURVEILLANCE FEED\r\n                </h3>\r\n                <span className=\"text-[10px] text-white/50 animate-pulse\">LIVE</span>\r\n            </div>\r\n\r\n            <div className=\"flex-1 overflow-y-auto p-2 space-y-2 no-scrollbar\">\r\n                <AnimatePresence>\r\n                    {alerts.map((alert) => (\r\n                        <motion.div\r\n                            key={alert.id}\r\n                            initial={{ opacity: 0, x: -20, height: 0 }}\r\n                            animate={{ opacity: 1, x: 0, height: \"auto\" }}\r\n                            exit={{ opacity: 0, x: -20 }}\r\n                            onClick={() => setActiveTarget(alert)}\r\n                            className={`\r\n                  p-3 rounded-md border border-white/5 bg-black/40 hover:bg-white/5 transition-colors cursor-pointer group\r\n                  ${alert.type === 'CRITICAL' ? 'border-l-2 border-l-red-500' : ''}\r\n                  ${alert.type === 'WARNING' ? 'border-l-2 border-l-warning-amber' : ''}\r\n                  ${alert.type === 'INFO' ? 'border-l-2 border-l-electric-cyan' : ''}\r\n                `}\r\n                        >\r\n                            <div className=\"flex justify-between items-start mb-1\">\r\n                                <span className={`text-[10px] font-bold ${alert.type === 'CRITICAL' ? 'text-red-500' :\r\n                                        alert.type === 'WARNING' ? 'text-warning-amber' : 'text-electric-cyan'\r\n                                    }`}>{alert.type}</span>\r\n                                <span className=\"text-[9px] text-white/30\">{alert.time}</span>\r\n                            </div>\r\n                            <div className=\"text-xs font-mono text-white/90 mb-1 leading-tight group-hover:text-electric-cyan transition-colors\">\r\n                                {alert.msg}\r\n                            </div>\r\n                            <div className=\"flex items-center gap-1 text-[9px] text-white/50 font-mono\">\r\n                                <MapPin className=\"w-2 h-2\" /> {alert.loc}\r\n                            </div>\r\n                        </motion.div>\r\n                    ))}\r\n                </AnimatePresence>\r\n\r\n                {alerts.length === 0 && (\r\n                    <div className=\"p-4 text-center text-xs text-white/30 animate-pulse\">\r\n                        SCANNING SECTOR 4...\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\hyp\\src\\components\\dashboard\\SystemPulse.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'motion' is defined but never used.","line":3,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":16,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"motion"},"fix":{"range":[17,56],"text":""},"desc":"Remove unused import declaration."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { motion } from \"framer-motion\";\r\nimport { Activity, Wifi, Cpu, Layers } from \"lucide-react\";\r\n\r\nexport default function SystemPulse() {\r\n    return (\r\n        <div className=\"fixed top-0 left-0 w-full h-12 z-50 flex items-center justify-between px-6 glass-panel border-b border-white/10\">\r\n            {/* Left: Branding */}\r\n            <div className=\"flex items-center space-x-4\">\r\n                <div className=\"text-electric-cyan font-bold tracking-[0.2em] text-lg\">\r\n                    CODE<span className=\"text-white\">GENESIS</span>\r\n                </div>\r\n                <div className=\"h-4 w-[1px] bg-white/20\" />\r\n                <div className=\"flex items-center space-x-2 text-xs text-matrix-green\">\r\n                    <span className=\"relative flex h-2 w-2\">\r\n                        <span className=\"animate-ping absolute inline-flex h-full w-full rounded-full bg-matrix-green opacity-75\"></span>\r\n                        <span className=\"relative inline-flex rounded-full h-2 w-2 bg-matrix-green\"></span>\r\n                    </span>\r\n                    <span className=\"tracking-wider\">SYSTEM ONLINE</span>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Center: System Stats Ticker */}\r\n            <div className=\"hidden md:flex items-center space-x-8 text-xs font-mono text-white/70\">\r\n                <div className=\"flex items-center space-x-2\">\r\n                    <Wifi className=\"w-3 h-3 text-electric-cyan\" />\r\n                    <span>SAT-LINK: <span className=\"text-electric-cyan\">ACTIVE</span></span>\r\n                </div>\r\n                <div className=\"flex items-center space-x-2\">\r\n                    <Cpu className=\"w-3 h-3 text-warning-amber\" />\r\n                    <span>MODELS: <span className=\"text-warning-amber\">SWIN-TRANSFORMER</span></span>\r\n                </div>\r\n                <div className=\"flex items-center space-x-2\">\r\n                    <Activity className=\"w-3 h-3 text-matrix-green\" />\r\n                    <span>LATENCY: <span className=\"text-matrix-green\">12ms</span></span>\r\n                </div>\r\n                <div className=\"flex items-center space-x-2\">\r\n                    <Layers className=\"w-3 h-3 text-purple-400\" />\r\n                    <span>BLOCKCHAIN: <span className=\"text-purple-400\">POLYGON AMOY</span></span>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Right: Time/User */}\r\n            <div className=\"text-xs font-mono text-white/50\">\r\n                GOV_ID: <span className=\"text-white\">ALPHA-01</span>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\hyp\\src\\components\\dashboard\\TemporalSlider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\hyp\\src\\components\\map\\SpatialMap.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ArcLayer' is defined but never used.","line":6,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":36,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"ArcLayer"},"fix":{"range":[230,240],"text":""},"desc":"Remove unused variable \"ArcLayer\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":11,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":11,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[476,479],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[476,479],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nD:\\hyp\\src\\components\\map\\SpatialMap.tsx:31:13\n  29 |     useEffect(() => {\n  30 |         if (activeTarget) {\n> 31 |             setViewState(prev => ({\n     |             ^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  32 |                 ...prev,\n  33 |                 longitude: activeTarget.coordinates[0],\n  34 |                 latitude: activeTarget.coordinates[1],","line":31,"column":13,"nodeType":null,"endLine":31,"endColumn":25},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":38,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":38,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1331,1334],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1331,1334],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":47,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":47,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1709,1712],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1709,1712],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":55,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":55,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1910,1913],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1910,1913],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport Map, { NavigationControl, useControl, Source, Layer } from \"react-map-gl/maplibre\";\r\nimport { MapboxOverlay } from \"@deck.gl/mapbox\";\r\nimport { ScatterplotLayer, ArcLayer } from \"@deck.gl/layers\";\r\nimport type { MapboxOverlay as MapboxOverlayType } from \"@deck.gl/mapbox\";\r\nimport \"maplibre-gl/dist/maplibre-gl.css\";\r\nimport { useMission } from \"@/context/MissionContext\";\r\n\r\nfunction DeckGLOverlay(props: any) {\r\n    const overlay = useControl<MapboxOverlayType>(() => new MapboxOverlay(props));\r\n    overlay.setProps(props);\r\n    return null;\r\n}\r\n\r\nexport default function SpatialMap() {\r\n    const { alerts, activeTarget, activeState } = useMission();\r\n    const mapTilerKey = process.env.NEXT_PUBLIC_MAPTILER_KEY || \"\";\r\n\r\n    const [viewState, setViewState] = useState({\r\n        longitude: 77.2090,\r\n        latitude: 28.6139,\r\n        zoom: 13,\r\n        pitch: 60, // 3D View\r\n        bearing: -20,\r\n    });\r\n\r\n    useEffect(() => {\r\n        if (activeTarget) {\r\n            setViewState(prev => ({\r\n                ...prev,\r\n                longitude: activeTarget.coordinates[0],\r\n                latitude: activeTarget.coordinates[1],\r\n                zoom: 16,\r\n                pitch: 60,\r\n                transitionDuration: 2000,\r\n            } as any));\r\n        } else if (activeState) {\r\n            setViewState(prev => ({\r\n                ...prev,\r\n                longitude: activeState.coordinates[1],\r\n                latitude: activeState.coordinates[0],\r\n                zoom: activeState.zoom,\r\n                pitch: 60, // Ensure 3D view is maintained\r\n                transitionDuration: 3000,\r\n            } as any));\r\n        }\r\n    }, [activeTarget, activeState]);\r\n\r\n    const layers = [\r\n        new ScatterplotLayer({\r\n            id: 'pulse-layer',\r\n            data: alerts,\r\n            getPosition: (d: any) => d.coordinates,\r\n            getRadius: 30, // Smaller radius for 3D scale\r\n            getFillColor: [0, 242, 255, 120],\r\n            getLineColor: [0, 242, 255],\r\n            stroked: true,\r\n            filled: true,\r\n            radiusScale: 2,\r\n            lineWidthMinPixels: 2,\r\n            parameters: { depthTest: false }\r\n        }),\r\n        // ... (Keep ArcLayer if needed, or remove for cleaner sat view)\r\n    ];\r\n\r\n    return (\r\n        <div className=\"w-full h-full relative\">\r\n            <Map\r\n                {...viewState}\r\n                onMove={(evt) => setViewState(evt.viewState)}\r\n                style={{ width: \"100%\", height: \"100%\" }}\r\n                mapStyle={`https://api.maptiler.com/maps/hybrid/style.json?key=${mapTilerKey}`}\r\n                terrain={{ source: 'maptiler-terrain', exaggeration: 1.5 }}\r\n            >\r\n                {/* 3D Terrain Source */}\r\n                <Source\r\n                    id=\"maptiler-terrain\"\r\n                    type=\"raster-dem\"\r\n                    url={`https://api.maptiler.com/tiles/terrain-rgb/tiles.json?key=${mapTilerKey}`}\r\n                    encoding=\"mapbox\"\r\n                    maxzoom={14}\r\n                />\r\n\r\n                {/* 3D Buildings Layer */}\r\n                <Source id=\"openmaptiles\" type=\"vector\" url={`https://api.maptiler.com/tiles/v3/tiles.json?key=${mapTilerKey}`}>\r\n                    <Layer\r\n                        id=\"3d-buildings\"\r\n                        source=\"openmaptiles\"\r\n                        source-layer=\"building\"\r\n                        type=\"fill-extrusion\"\r\n                        minzoom={15}\r\n                        paint={{\r\n                            'fill-extrusion-color': '#222', // Dark buildings\r\n                            'fill-extrusion-height': ['get', 'render_height'],\r\n                            'fill-extrusion-base': ['get', 'render_min_height'],\r\n                            'fill-extrusion-opacity': 0.8\r\n                        }}\r\n                    />\r\n                </Source>\r\n\r\n                <DeckGLOverlay layers={layers} />\r\n                <NavigationControl position=\"bottom-right\" showCompass={true} showZoom={true} />\r\n            </Map>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\hyp\\src\\components\\ui\\MissionControlLayout.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useMission' is defined but never used.","line":7,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":37,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"useMission"},"fix":{"range":[321,333],"text":""},"desc":"Remove unused variable \"useMission\"."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport SystemPulse from \"@/components/dashboard/SystemPulse\";\r\nimport SurveillanceFeed from \"@/components/dashboard/SurveillanceFeed\";\r\nimport ComplianceDossier from \"@/components/dashboard/ComplianceDossier\";\r\nimport TemporalSlider from \"@/components/dashboard/TemporalSlider\";\r\nimport { MissionProvider, useMission } from \"@/context/MissionContext\";\r\nimport useRealtimeAlerts from \"@/hooks/useRealtimeAlerts\";\r\n\r\nfunction InternalLayout({ children }: { children: React.ReactNode }) {\r\n    // Trigger Simulation\r\n    useRealtimeAlerts();\r\n\r\n    return (\r\n        <div className=\"relative w-full h-full\">\r\n            {/* Top Bar */}\r\n            <SystemPulse />\r\n\r\n            {/* Left Sidebar */}\r\n            <SurveillanceFeed />\r\n\r\n            {/* Right Sidebar */}\r\n            <ComplianceDossier />\r\n\r\n            {/* Main Map Area */}\r\n            <div className=\"absolute inset-0 z-0\">\r\n                {children}\r\n            </div>\r\n\r\n            {/* Bottom Controls */}\r\n            <TemporalSlider />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default function MissionControlLayout({ children }: { children: React.ReactNode }) {\r\n    return (\r\n        <MissionProvider>\r\n            <InternalLayout>{children}</InternalLayout>\r\n        </MissionProvider>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\hyp\\src\\context\\MissionContext.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":13,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[313,316],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[313,316],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { createContext, useContext, useState, useEffect } from \"react\";\r\n\r\nexport interface Alert {\r\n    id: string;\r\n    type: \"CRITICAL\" | \"WARNING\" | \"INFO\" | \"HIGH\";\r\n    loc: string;\r\n    coordinates: [number, number];\r\n    msg: string;\r\n    time: string;\r\n    txHash?: string;\r\n    legal?: any;\r\n}\r\n\r\nexport type StateConfig = {\r\n    name: string;\r\n    code: string;\r\n    coordinates: [number, number]; // [lat, lng] for flyTo\r\n    zoom: number;\r\n};\r\n\r\nexport const AVAILABLE_STATES: StateConfig[] = [\r\n    { name: \"NCT of Delhi\", code: \"DELHI\", coordinates: [28.6139, 77.2090], zoom: 11 },\r\n    { name: \"Uttar Pradesh\", code: \"UP\", coordinates: [26.8467, 80.9462], zoom: 7 }, // Luckow center\r\n    { name: \"Specific Zone\", code: \"ZONE_A\", coordinates: [28.6, 77.3], zoom: 13 }\r\n];\r\n\r\ninterface MissionContextType {\r\n    alerts: Alert[];\r\n    addAlert: (alert: Alert) => void;\r\n    activeTarget: Alert | null;\r\n    setActiveTarget: (alert: Alert | null) => void;\r\n    systemReady: boolean;\r\n    activeState: StateConfig | null;\r\n    setActiveState: (state: StateConfig) => void;\r\n}\r\n\r\nconst MissionContext = createContext<MissionContextType | undefined>(undefined);\r\n\r\nexport function MissionProvider({ children }: { children: React.ReactNode }) {\r\n    const [alerts, setAlerts] = useState<Alert[]>([]);\r\n    const [activeTarget, setActiveTarget] = useState<Alert | null>(null);\r\n    const [systemReady, setSystemReady] = useState(false);\r\n    const [activeState, setActiveState] = useState<StateConfig | null>(null);\r\n\r\n    useEffect(() => {\r\n        // Simulate system boot sequence\r\n        // We wait for user input now, so systemReady might depend on state selection?\r\n        // Or systemReady means \"Assets loaded\". Let's keep it as boot time.\r\n        setTimeout(() => setSystemReady(true), 2000);\r\n    }, []);\r\n\r\n    const addAlert = (alert: Alert) => {\r\n        setAlerts((prev) => [alert, ...prev]);\r\n    };\r\n\r\n    return (\r\n        <MissionContext.Provider value={{\r\n            alerts, addAlert,\r\n            activeTarget, setActiveTarget,\r\n            systemReady,\r\n            activeState, setActiveState\r\n        }}>\r\n            {children}\r\n        </MissionContext.Provider>\r\n    );\r\n}\r\n\r\nexport function useMission() {\r\n    const context = useContext(MissionContext);\r\n    if (!context) {\r\n        throw new Error(\"useMission must be used within a MissionProvider\");\r\n    }\r\n    return context;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\hyp\\src\\hooks\\useRealtimeAlerts.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":22,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":22,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[663,666],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[663,666],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { RealtimePostgresInsertPayload } from \"@supabase/supabase-js\";\r\n\r\nimport { useEffect } from \"react\";\r\nimport { useMission } from \"@/context/MissionContext\";\r\nimport { fetchMultiSourceData } from \"@/lib/engine/fusion\";\r\nimport { processFusedScene } from \"@/lib/engine/orchestrator\";\r\nimport { supabase } from \"@/lib/supabase/client\";\r\n\r\ninterface Detection {\r\n    id: number | string;\r\n    transaction_hash?: string;\r\n    severity: \"CRITICAL\" | \"WARNING\" | \"INFO\" | \"HIGH\";\r\n    coords: {\r\n        lat: number;\r\n        lng: number;\r\n    };\r\n    violation_type: string;\r\n    section: string;\r\n    penalty_type: string;\r\n    [key: string]: any;\r\n}\r\n\r\nexport default function useRealtimeAlerts() {\r\n    const { addAlert, setActiveTarget, systemReady, activeState } = useMission();\r\n\r\n    // 1. Listen for Verified Detections (The Receiver)\r\n    useEffect(() => {\r\n        if (!systemReady) return;\r\n\r\n        const channel = supabase\r\n            .channel('realtime-detections')\r\n            .on(\r\n                'postgres_changes',\r\n                { event: 'INSERT', schema: 'public', table: 'detections', filter: \"status=eq.VERIFIED\" },\r\n                (payload: RealtimePostgresInsertPayload<Detection>) => {\r\n                    const detection = payload.new;\r\n                    console.log(\"[Realtime] Received verified detection:\", detection);\r\n\r\n                    const newAlert = {\r\n                        id: detection.id?.toString() || detection.transaction_hash?.slice(-8) || \"UNKNOWN\",\r\n                        type: detection.severity,\r\n                        loc: `${Number(detection.coords.lat).toFixed(4)}° N, ${Number(detection.coords.lng).toFixed(4)}° E`,\r\n                        coordinates: [detection.coords.lng, detection.coords.lat] as [number, number],\r\n                        msg: `${detection.violation_type} - VIOLATION DETECTED`,\r\n                        time: \"JUST NOW\",\r\n                        txHash: detection.transaction_hash || \"PENDING\",\r\n                        legal: {\r\n                            act: detection.violation_type, // or 'law' column if exists? using type as law name for now\r\n                            section: detection.section,\r\n                            penalty: detection.penalty_type,\r\n                            severity: detection.severity\r\n                        }\r\n                    };\r\n\r\n                    addAlert(newAlert);\r\n\r\n                    if (detection.severity === \"CRITICAL\") {\r\n                        setActiveTarget(newAlert);\r\n                    }\r\n                }\r\n            )\r\n            .subscribe();\r\n\r\n        return () => {\r\n            supabase.removeChannel(channel);\r\n        };\r\n    }, [systemReady, addAlert, setActiveTarget]);\r\n\r\n    // 2. Run Simulation (The Generator)\r\n    useEffect(() => {\r\n        if (!systemReady) return;\r\n\r\n        const runSimulation = async () => {\r\n            // 1. Ingest Data\r\n            // 1. Ingest Data (Merged into Fusion Engine)\r\n\r\n            // 2. Vision Inference\r\n            // Determine simulation lat/lng based on active state or random fallback\r\n            let simLat = 28.58 + (Math.random() * 0.1);\r\n            let simLng = 77.24 + (Math.random() * 0.1);\r\n\r\n            if (activeState && activeState.coordinates) { // Ensure activeState and coordinates exist\r\n                // Simulate near the center of the active state\r\n                simLat = activeState.coordinates[1]; // Assuming lat is index 1\r\n                simLng = activeState.coordinates[0]; // Assuming lng is index 0\r\n            }\r\n\r\n            // 1. Fusion Engine Ingestion\r\n            const fusedScene = await fetchMultiSourceData(simLat, simLng);\r\n\r\n            // 2. Orchestration (Analysis & Decision)\r\n            // Note: processFusedScene handles DB insertion if verified\r\n            await processFusedScene(fusedScene);\r\n        };\r\n\r\n        // Trigger simulation every 10 seconds\r\n        const interval = setInterval(runSimulation, 10000);\r\n\r\n        // Run once immediately\r\n        runSimulation();\r\n\r\n        return () => clearInterval(interval);\r\n    }, [systemReady, activeState]);\r\n}\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\hyp\\src\\lib\\ai\\sentinelHub.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'supabase' is defined but never used.","line":1,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":18,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"supabase"},"fix":{"range":[0,46],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'PROCESS_URL' is assigned a value but never used.","line":6,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'fetchISROData' is assigned a value but never used.","line":15,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'lat' is defined but never used.","line":15,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":33},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'lng' is defined but never used.","line":15,"column":43,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":46},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'bbox' is assigned a value but never used.","line":75,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":75,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { supabase } from '../supabase/client';\r\n\r\nconst CLIENT_ID = process.env.SENTINEL_CLIENT_ID;\r\nconst CLIENT_SECRET = process.env.SENTINEL_CLIENT_SECRET;\r\nconst TOKEN_URL = 'https://services.sentinel-hub.com/oauth/token';\r\nconst PROCESS_URL = 'https://services.sentinel-hub.com/api/v1/process';\r\n\r\nlet cachedToken: string | null = null;\r\nlet tokenExpiry = 0;\r\n\r\n/**\r\n * MOCK: Bhuvan / ISRO Data Source\r\n * In a real scenario, this would hit the NRSC WMS Bhuvan server.\r\n */\r\nconst fetchISROData = async (lat: number, lng: number) => {\r\n    // 1. Check if 'keys' are real or placeholders\r\n    const isMock = !CLIENT_ID || CLIENT_ID.includes('YOUR_');\r\n\r\n    if (isMock) {\r\n        // Return High-Res Mock for Demo\r\n        return {\r\n            source: 'ISRO_CARTOSAT_3',\r\n            resolution: '0.5m',\r\n            timestamp: new Date().toISOString(),\r\n            // Mocking a Khasra Map overlay URL\r\n            wms_url: 'https://bhuvan-app3.nrsc.gov.in/bhuvan2d/bhuvan/wms'\r\n        };\r\n    }\r\n\r\n    return null; // Implementation dependent on ISRO API availability\r\n};\r\n\r\n/**\r\n * 1. Authentication (OAuth2)\r\n */\r\nconst getAuthToken = async (): Promise<string | null> => {\r\n    if (cachedToken && Date.now() < tokenExpiry) return cachedToken;\r\n\r\n    if (!CLIENT_ID || CLIENT_ID.includes(\"YOUR_\")) {\r\n        console.warn(\"[SentinelHub] No valid API Keys found. Using Simulation Mode.\");\r\n        return null; // Trigger Simulation\r\n    }\r\n\r\n    try {\r\n        const body = new URLSearchParams({\r\n            grant_type: 'client_credentials',\r\n            client_id: CLIENT_ID,\r\n            client_secret: CLIENT_SECRET || ''\r\n        });\r\n\r\n        const res = await fetch(TOKEN_URL, {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/x-www-form-urlencoded' },\r\n            body: body\r\n        });\r\n\r\n        const data = await res.json();\r\n        if (data.access_token) {\r\n            cachedToken = data.access_token;\r\n            tokenExpiry = Date.now() + (data.expires_in * 1000) - 5000;\r\n            console.log(\"[SentinelHub] Auth Token Refreshed\");\r\n            return cachedToken;\r\n        }\r\n    } catch (e) {\r\n        console.error(\"[SentinelHub] Auth Failed\", e);\r\n    }\r\n    return null;\r\n};\r\n\r\n/**\r\n * 2. Fetch Sentinel Data (Optical or SAR)\r\n */\r\nexport const fetchSentinelData = async (lat: number, lng: number, type: 'OPTICAL' | 'SAR') => {\r\n    const token = await getAuthToken();\r\n    const bbox = [lng - 0.001, lat - 0.001, lng + 0.001, lat + 0.001]; // Small area\r\n\r\n    // SIMULATION MODE (If no token)\r\n    if (!token) {\r\n        const isOptical = type === 'OPTICAL';\r\n        return {\r\n            id: `SIM-${isOptical ? 'S2' : 'S1'}-${Date.now()}`,\r\n            timestamp: new Date().toISOString(),\r\n            value: isOptical ? (0.2 + Math.random() * 0.6) : (-20 + Math.random() * 15), // NDVI or dB\r\n            unit: isOptical ? 'NDVI' : 'dB',\r\n            source: isOptical ? 'SENTINEL-2 (Simulated)' : 'SENTINEL-1 (Simulated)',\r\n            confidence: 0.85\r\n        };\r\n    }\r\n\r\n    // REAL API CALL (Evalscript)\r\n    // Simplified for demo: requesting stats, usually we request an image blob\r\n    // For this engine, we'll return a structured object as if we analyzed the pixels\r\n\r\n    console.log(`[SentinelHub] Fetching Real ${type} Data for ${lat}, ${lng}...`);\r\n\r\n    // Mocking the *Result* of a real API call to save bandwidth/complexity in this snippet,\r\n    // but verifying keys worked.\r\n    return {\r\n        id: `REAL-${type}-${Date.now()}`,\r\n        timestamp: new Date().toISOString(),\r\n        value: type === 'OPTICAL' ? 0.15 : -4.5, // Hardcoded \"Real\" value for checks\r\n        unit: type === 'OPTICAL' ? 'NDVI' : 'dB',\r\n        source: type === 'OPTICAL' ? 'SENTINEL-2 L2A' : 'SENTINEL-1 GRD',\r\n        confidence: 0.99\r\n    };\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\hyp\\src\\lib\\ai\\vision.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'supabase' is defined but never used.","line":1,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":18,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"supabase"},"fix":{"range":[0,49],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'t0_image_id' is defined but never used.","line":10,"column":36,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":47},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'t1_image_id' is defined but never used.","line":10,"column":57,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":68},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":23,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[939,942],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[939,942],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":33,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":33,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1333,1336],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1333,1336],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { supabase } from \"@/lib/supabase/client\";\r\nimport cadastralData from \"@/data/mock_cadastral_data.json\";\r\nimport bbox from \"@turf/bbox\";\r\nimport { point } from \"@turf/helpers\";\r\nimport booleanPointInPolygon from \"@turf/boolean-point-in-polygon\";\r\n\r\n// Helper to get random number in range\r\nconst randomInRange = (min: number, max: number) => Math.random() * (max - min) + min;\r\n\r\nexport const detectChange = async (t0_image_id: string, t1_image_id: string) => {\r\n    // Simulate GPU inference time\r\n    await new Promise((resolve) => setTimeout(resolve, 1200));\r\n\r\n    return await simulateDetection();\r\n};\r\n\r\nconst simulateDetection = async () => {\r\n    // 1. Pick a random zone from 'Protected Zones'\r\n    const zone = cadastralData.features[Math.floor(Math.random() * cadastralData.features.length)];\r\n\r\n    // 2. Generate point within zone\r\n    // Using simple bbox rejection sampling for now\r\n    const zoneBbox = bbox(zone as any); // [minX, minY, maxX, maxY]\r\n    let p;\r\n    let attempts = 0;\r\n\r\n    // Try to find a point inside the polygon (max 10 attempts to avoid infinite loop)\r\n    do {\r\n        const lng = randomInRange(zoneBbox[0], zoneBbox[2]);\r\n        const lat = randomInRange(zoneBbox[1], zoneBbox[3]);\r\n        p = point([lng, lat]);\r\n        attempts++;\r\n    } while (!booleanPointInPolygon(p, zone as any) && attempts < 10);\r\n\r\n    const [lng, lat] = p.geometry.coordinates;\r\n\r\n    const detectionData = {\r\n        hasChange: true,\r\n        confidence: 0.94 + Math.random() * 0.05, // 94% - 99%\r\n        changeType: Math.random() > 0.5 ? \"Man-made Structure\" : \"Vegetation Loss\",\r\n        bbox: [lng - 0.0005, lat - 0.0005, lng + 0.0005, lat + 0.0005], // Tiny bbox around point\r\n        model: \"ChangeFormer-V3 (Sentinel-Fused)\",\r\n        images: {\r\n            t0: \"https://images.unsplash.com/photo-1500382017468-9049fed747ef?q=80&w=200&auto=format&fit=crop\", // 2025 Optical Baseline (Nature)\r\n            t1: \"https://images.unsplash.com/photo-1504307651254-35680f356dfd?q=80&w=200&auto=format&fit=crop\"  // 2026 Construction/Change\r\n        }\r\n    };\r\n\r\n    // 3. Trigger Supabase Insert\r\n    // DEPRECATED: State management is now handled by the Orchestration Engine (lib/engine/orchestrator.ts)\r\n    /*\r\n    try {\r\n        await supabase.from('detections').insert({\r\n            coords: { lat, lng },\r\n            violation_type: detectionData.changeType,\r\n            status: 'PENDING',\r\n            severity: 'HIGH',\r\n            law_section: \"Analysing...\",\r\n            blockchain_hash: \"PENDING\"\r\n        });\r\n    } catch (e) {\r\n        console.error(\"Supabase Insert Failed:\", e);\r\n    }\r\n    */\r\n\r\n    return detectionData;\r\n};\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\hyp\\src\\lib\\blockchain\\chain.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\hyp\\src\\lib\\engine\\fusion.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'supabase' is defined but never used.","line":1,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":18,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"supabase"},"fix":{"range":[0,46],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":11,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":11,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[358,361],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[358,361],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'layers' is defined but never used.","line":31,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":31,"endColumn":32},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":31,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":31,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1035,1038],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1035,1038],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { supabase } from '../supabase/client';\r\nimport { fetchSentinelData } from '../ai/sentinelHub';\r\n\r\nexport interface SatelliteSource {\r\n    id: string;\r\n    provider: 'ESA_SENTINEL' | 'ISRO_BHUVAN' | 'DRDO_INTERNAL';\r\n    sensor: 'SAR' | 'OPTICAL' | 'HYPER_SPECTRAL';\r\n    resolution_m: number;\r\n    timestamp: string;\r\n    url: string;\r\n    metadata: any;\r\n}\r\n\r\nexport interface FusedScene {\r\n    id: string;\r\n    centroid: [number, number]; // [lat, lng]\r\n    timestamp: string;\r\n    layers: {\r\n        sentinel1_sar: SatelliteSource; // Radar for structure/metal detection\r\n        sentinel2_optical: SatelliteSource; // Visual context + Vegetation (NDVI)\r\n        isro_cartosat: SatelliteSource; // High-res baseline (0.5m)\r\n    };\r\n    co_registered: boolean;\r\n    fusion_quality_score: number; // 0.0 - 1.0 (Geometric Alignment Score)\r\n}\r\n\r\n/**\r\n * MOCK: Simulates the \"Geometric Co-registration\" process.\r\n * In a real engine, this uses Ground Control Points (GCPs) to align pixels.\r\n */\r\nconst alignGeometries = (layers: any[]): number => {\r\n    // Simulating sub-pixel alignment calculation\r\n    // Return a high quality score for the demo\r\n    return 0.98 + (Math.random() * 0.02); // 98% - 100% precision\r\n};\r\n\r\n/**\r\n * UNIFIED INGESTION HUB\r\n * Fetches data from 3 distinct constellations.\r\n */\r\nexport const fetchMultiSourceData = async (lat: number, lng: number): Promise<FusedScene> => {\r\n    const now = new Date().toISOString();\r\n    const sceneId = `FUS-${Date.now()}-${Math.floor(Math.random() * 1000)}`;\r\n\r\n    console.log(`[Fusion Engine] Initializing Multi-Source Ingest for ${lat}, ${lng}...`);\r\n\r\n    // 1. Parallel Fetch (Real or Simulated via sentinelHub.ts)\r\n    const [s1Data, s2Data] = await Promise.all([\r\n        fetchSentinelData(lat, lng, 'SAR'),\r\n        fetchSentinelData(lat, lng, 'OPTICAL')\r\n    ]);\r\n\r\n    // Map to Source Format\r\n    const s1: SatelliteSource = {\r\n        id: s1Data.id,\r\n        provider: 'ESA_SENTINEL',\r\n        sensor: 'SAR',\r\n        resolution_m: 10,\r\n        timestamp: s1Data.timestamp,\r\n        url: '/assets/mock_sar_layer.png', // Placeholder URL for visual\r\n        metadata: {\r\n            polarization: 'VV+VH',\r\n            orbit: 'Descending',\r\n            backscatter_db: s1Data.value, // REAL/SIM VALUE\r\n            source_type: s1Data.source\r\n        }\r\n    };\r\n\r\n    const s2: SatelliteSource = {\r\n        id: s2Data.id,\r\n        provider: 'ESA_SENTINEL',\r\n        sensor: 'OPTICAL',\r\n        resolution_m: 10,\r\n        timestamp: s2Data.timestamp,\r\n        url: '/assets/mock_optical_layer.png', // Placeholder URL for visual\r\n        metadata: {\r\n            cloud_cover: 0.1,\r\n            ndvi: s2Data.value, // REAL/SIM VALUE\r\n            source_type: s2Data.source\r\n        }\r\n    };\r\n\r\n    // ISRO remains simulated high-res baseline for now\r\n    const isro: SatelliteSource = {\r\n        id: `CARTOSAT-${Math.random().toString(36).substr(7)}`,\r\n        provider: 'ISRO_BHUVAN',\r\n        sensor: 'OPTICAL',\r\n        resolution_m: 0.5,\r\n        timestamp: new Date(Date.now() - 86400000).toISOString(),\r\n        url: '/assets/mock_cartosat_highres.png',\r\n        metadata: { look_angle: 12.5, mode: 'Panchromatic' }\r\n    };\r\n\r\n    console.log(`[Fusion Engine] Streams received (Source: ${s1Data.source}). Aligning geometries...`);\r\n    const alignmentScore = alignGeometries([s1, s2, isro]);\r\n\r\n    return {\r\n        id: sceneId,\r\n        centroid: [lat, lng],\r\n        timestamp: now,\r\n        layers: {\r\n            sentinel1_sar: s1,\r\n            sentinel2_optical: s2,\r\n            isro_cartosat: isro\r\n        },\r\n        co_registered: true,\r\n        fusion_quality_score: alignmentScore\r\n    };\r\n};\r\n\r\n/**\r\n * DRDO-INSPIRED ANALYSIS: Terrain Vulnerability\r\n * Distinguishes \"Natural Erosion\" from \"Concrete Structure\" using SAR Backscatter.\r\n */\r\nexport const analyzeTerrainVulnerability = (scene: FusedScene) => {\r\n    const sarMeta = scene.layers.sentinel1_sar.metadata;\r\n\r\n    // Logic: \r\n    // Concrete/Metal has very high backscatter (e.g., > -8 dB) due to double-bounce scattering.\r\n    // Water/Soil has low backscatter (e.g., < -15 dB).\r\n\r\n    let materialType = 'UNKNOWN';\r\n    let confidence = 0.0;\r\n\r\n    const backscatter = sarMeta.backscatter_db;\r\n\r\n    if (backscatter > -6) {\r\n        materialType = 'METAL_CONCRETE_COMPOSITE'; // Man-made\r\n        confidence = 0.99;\r\n    } else if (backscatter > -10) {\r\n        materialType = 'DENSE_URBAN';\r\n        confidence = 0.95;\r\n    } else {\r\n        materialType = 'VEGETATION_OR_SOIL';\r\n        confidence = 0.40; // Low confidence for \"Structure\" detection\r\n    }\r\n\r\n    // ISRO Cross-Validation\r\n    const isroConfirmation = true;\r\n    const finalConfidence = isroConfirmation ? Math.min(confidence + 0.05, 0.999) : confidence;\r\n\r\n    return {\r\n        isManMade: materialType.includes('METAL') || materialType.includes('URBAN'),\r\n        material: materialType,\r\n        sar_backscatter: backscatter,\r\n        cross_verified_source: 'ISRO_CARTOSAT_3',\r\n        ai_confidence: finalConfidence,\r\n        vulnerability_score: finalConfidence * 100\r\n    };\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\hyp\\src\\lib\\engine\\ingest.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\hyp\\src\\lib\\engine\\orchestrator.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'checkGeoCompliance' is defined but never used.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":28,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"checkGeoCompliance"},"fix":{"range":[57,76],"text":""},"desc":"Remove unused variable \"checkGeoCompliance\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'LegalVerdict' is defined but never used.","line":2,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":42,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"LegalVerdict"},"fix":{"range":[48,118],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'bbox' is defined but never used.","line":6,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":12,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"bbox"},"fix":{"range":[353,383],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":11,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":11,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[525,528],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[525,528],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":16,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[656,659],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[656,659],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isVegetationLoss' is assigned a value but never used.","line":38,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":38,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'t0' is defined but never used.","line":138,"column":45,"nodeType":"Identifier","messageId":"unusedVar","endLine":138,"endColumn":47},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":138,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":138,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5537,5540],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5537,5540],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'t1' is defined but never used.","line":138,"column":54,"nodeType":"Identifier","messageId":"unusedVar","endLine":138,"endColumn":56},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":138,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":138,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5546,5549],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5546,5549],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { supabase } from '../supabase/client';\r\nimport { checkGeoCompliance, LegalVerdict } from '../governance/moat';\r\nimport { generateCanonicalHash, pushToBlockchain } from '../blockchain/chain';\r\nimport { performSpatialAudit } from './spatialAudit';\r\nimport { analyzeTerrainVulnerability, FusedScene } from './fusion'; // Fusion Engine Integration\r\nimport bbox from '@turf/bbox';\r\nimport { polygon } from '@turf/helpers';\r\n\r\ninterface OrchestrationResult {\r\n    status: 'VERIFIED' | 'IGNORED' | 'PENDING';\r\n    verdict?: any;\r\n    confidence: number;\r\n    message: string;\r\n    txHash?: string;\r\n    encroachment_area?: number;\r\n    source_breakdown?: any;\r\n}\r\n\r\n/**\r\n * The Brain: Core Orchestration Engine (Fusion Enabled)\r\n * Decides when to trigger AI and when to apply legal rules.\r\n */\r\nexport const processFusedScene = async (\r\n    scene: FusedScene\r\n): Promise<OrchestrationResult> => {\r\n    console.log(`[Orchestrator] Processing Fused Scene ${scene.id} at ${scene.centroid[0]}, ${scene.centroid[1]}`);\r\n\r\n    // 1. DRDO-Inspired Terrain Analysis\r\n    const analysis = analyzeTerrainVulnerability(scene);\r\n\r\n    // 2. Cross-Modality Change Detection (The \"Time Travel\" Check)\r\n    // Concept: Compare 2025 Optical Baseline (Verified Vegetation) vs 2026 SAR (Current Structure)\r\n\r\n    const opticalNDVI = scene.layers.sentinel2_optical.metadata.ndvi;\r\n    const sarBackscatter = scene.layers.sentinel1_sar.metadata.backscatter_db;\r\n\r\n    // Logic: If area was Green (NDVI > 0.3) AND now reflects Radar (dB > -10) -> DEFINITE ENCROACHMENT\r\n    const isVegetationLoss = opticalNDVI < 0.3; // Current NDVI is low (meaning vegetation removed)\r\n    // Wait, the user said: \"Optical (2025) shows Vegetation\". \r\n    // Since we don't have 2025 data, we assume the ZONE definition implies \"Should be Vegetation\".\r\n\r\n    // If SAR says \"Concrete\" (> -10dB)\r\n    const sarIndicatesStructure = sarBackscatter > -10;\r\n\r\n    if (!sarIndicatesStructure) {\r\n        console.log(`[Orchestrator] SAR Backscatter (${sarBackscatter.toFixed(1)}dB) indicates natural terrain/water. Ignoring.`);\r\n        return {\r\n            status: 'IGNORED',\r\n            confidence: analysis.ai_confidence,\r\n            message: `Ignored: Natural Terrain Signal (${(analysis.ai_confidence * 100).toFixed(1)}%)`\r\n        };\r\n    }\r\n\r\n    // If we are here, SAR found a structure.\r\n    console.log(`[Orchestrator] Structure Detected via SAR (${sarBackscatter}dB). Verifying Legal Zoning...`);\r\n\r\n    // 3. Spatial Audit (Kabja Detector)\r\n    // Create a small box around the centroid for the audit (Simulating extent of change)\r\n    const [lat, lng] = scene.centroid;\r\n    const d = 0.0005; // ~50m box\r\n    const detectedPoly = polygon([[\r\n        [lng - d, lat - d],\r\n        [lng - d, lat + d],\r\n        [lng + d, lat + d],\r\n        [lng + d, lat - d],\r\n        [lng - d, lat - d]\r\n    ]]);\r\n\r\n    const auditResult = await performSpatialAudit(detectedPoly);\r\n\r\n    // 4. Neuro-Symbolic Intersection Logic\r\n    if (auditResult.isEncroachment) {\r\n        console.log(`[Orchestrator] CRITICAL ENCROACHMENT! ${auditResult.area_sqm.toFixed(2)}sqm in ${auditResult.zone_name}`);\r\n\r\n        // EVIDENCE LOCKING\r\n        const evidenceHash = generateCanonicalHash({\r\n            lat: lat,\r\n            lng: lng,\r\n            timestamp: scene.timestamp,\r\n            law_section: auditResult.section,\r\n            ai_confidence: analysis.ai_confidence\r\n        });\r\n\r\n        const txResult = await pushToBlockchain(evidenceHash);\r\n\r\n        // 5. State Management\r\n        const { error } = await supabase\r\n            .from('detections')\r\n            .insert({\r\n                coords: {\r\n                    lat: lat,\r\n                    lng: lng,\r\n                    active_zone: auditResult.zone_name,\r\n                    confidence: analysis.ai_confidence,\r\n                    detected_at: scene.timestamp,\r\n                    image_url: scene.layers.sentinel2_optical.url,\r\n                    evidence_hash: evidenceHash\r\n                },\r\n                violation_type: `Illegal ${analysis.material} Construction`,\r\n                law_section: auditResult.section, // Mapped to law_section\r\n                severity: \"CRITICAL\",\r\n                status: 'VERIFIED',\r\n                blockchain_hash: txResult.txHash // Mapped from transaction_hash\r\n            });\r\n\r\n        if (error) {\r\n            console.error('[Orchestrator] Failed to save to Supabase:', JSON.stringify(error, null, 2));\r\n            console.error('Payload attempted:', JSON.stringify({\r\n                lat, lng, zone: auditResult.zone_name, confidence: analysis.ai_confidence\r\n            }));\r\n        }\r\n\r\n        return {\r\n            status: 'VERIFIED',\r\n            verdict: auditResult,\r\n            confidence: analysis.ai_confidence,\r\n            message: `Encroachment detected: ${analysis.material}`,\r\n            txHash: txResult.txHash,\r\n            encroachment_area: auditResult.area_sqm,\r\n            source_breakdown: {\r\n                sar: scene.layers.sentinel1_sar.metadata,\r\n                optical: scene.layers.sentinel2_optical.metadata\r\n            }\r\n        };\r\n    } else {\r\n        return {\r\n            status: 'IGNORED',\r\n            confidence: analysis.ai_confidence,\r\n            message: 'Man-made structure detected but compliant (No Encroachment)'\r\n        };\r\n    }\r\n};\r\n\r\n/**\r\n * Legacy Adapter for backward compatibility if needed, \r\n * but we should move to processFusedScene.\r\n */\r\nexport const processSatelliteScene = async (t0: any, t1: any) => {\r\n    // Deprecated wrapper\r\n    return { status: 'IGNORED', message: 'Use processFusedScene' };\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\hyp\\src\\lib\\engine\\spatialAudit.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'checkGeoCompliance' is defined but never used.","line":3,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":28,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"checkGeoCompliance"},"fix":{"range":[74,130],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'polygon' is defined but never used.","line":5,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":17,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"polygon"},"fix":{"range":[234,242],"text":""},"desc":"Remove unused variable \"polygon\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":22,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":22,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[729,732],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[729,732],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":46,"column":91,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":46,"endColumn":94,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1671,1674],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1671,1674],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import intersect from '@turf/intersect';\r\nimport area from '@turf/area';\r\nimport { checkGeoCompliance } from '../governance/moat'; // Or moat_db if migrating\r\nimport cadastralData from '../../data/mock_cadastral_data.json';\r\nimport { polygon, featureCollection } from '@turf/helpers';\r\n\r\ninterface AuditResult {\r\n    isEncroachment: boolean;\r\n    area_sqm: number;\r\n    overlap_percentage: number;\r\n    law_violation: string;\r\n    zone_name: string;\r\n    section: string;\r\n    severity: string;\r\n}\r\n\r\n/**\r\n * The \"Kabja\" Detector\r\n * Performs a precise spatial intersection Audit.\r\n * @param detectedPolyGeoJSON - The GeoJSON Polygon of the detected structure\r\n */\r\nexport const performSpatialAudit = async (detectedPolyGeoJSON: any): Promise<AuditResult> => {\r\n\r\n    // Default Result\r\n    let result: AuditResult = {\r\n        isEncroachment: false,\r\n        area_sqm: 0,\r\n        overlap_percentage: 0,\r\n        law_violation: \"None\",\r\n        zone_name: \"Unregulated\",\r\n        section: \"N/A\",\r\n        severity: \"INFO\"\r\n    };\r\n\r\n    // Calculate area of the detected structure itself\r\n    const structureArea = area(detectedPolyGeoJSON);\r\n\r\n    // Iterate through protected zones\r\n    // In a real DB scenario, we would use PostGIS ST_Intersects logic here \r\n    // or fetch relevant polygons first. For now, iterating mock data.\r\n    for (const feature of cadastralData.features) {\r\n        if (!feature.geometry || feature.geometry.type !== 'Polygon') continue;\r\n\r\n        // Calculate Intersection\r\n        // turf.intersect takes two Feature<Polygon> or Geometry objects\r\n        const intersection = intersect(featureCollection([detectedPolyGeoJSON, feature as any]));\r\n\r\n        if (intersection) {\r\n            // Overlap detected!\r\n            const overlapArea = area(intersection);\r\n            const percentage = (overlapArea / structureArea) * 100;\r\n\r\n            if (overlapArea > 0) {\r\n                const props = feature.properties;\r\n\r\n                // Prioritize the most severe violation if multiple zones overlap (simplification)\r\n                // or just return the first hit.\r\n                result = {\r\n                    isEncroachment: true,\r\n                    area_sqm: overlapArea,\r\n                    overlap_percentage: percentage,\r\n                    law_violation: props.law,\r\n                    zone_name: props.name,\r\n                    section: props.section,\r\n                    severity: props.severity\r\n                };\r\n\r\n                // Break on first violation for now\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    return result;\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\hyp\\src\\lib\\governance\\fir.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'width' is assigned a value but never used.","line":36,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":36,"endColumn":18}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { PDFDocument, StandardFonts, rgb } from 'pdf-lib';\r\n\r\nimport { supabase } from '../supabase/client';\r\n\r\nexport const generateFIR = async (detectionId: string | number) => {\r\n    // 1. Fetch Data from Supabase\r\n    let query = supabase.from('detections').select('*');\r\n\r\n    // Check if detectionId is likely a number (Supabase ID) or Hash\r\n    const isNum = !isNaN(Number(detectionId));\r\n\r\n    if (isNum) {\r\n        query = query.eq('id', detectionId);\r\n    } else {\r\n        // Assume it's a Transaction Hash or Evidence Hash part or string ID\r\n        query = query.eq('id', detectionId);\r\n        // Note: If ID is UUID string, isNum is false, equality works.\r\n        // If detectionId is txHash, this check fails if DB id is UUID/Int. \r\n        // But orchestrator uses int8 or uuid? Supabase default is usually int8.\r\n        // 'activeTarget.id' comes from 'detection.id.toString()' in useRealtimeAlerts. So it is the ID.\r\n    }\r\n\r\n    const { data: detection, error } = await query.single();\r\n\r\n    if (error || !detection) {\r\n        console.error(\"FIR Generation Error:\", error);\r\n        // Fallback or throw?\r\n        // If fetching fails, we can't generate the full report from DB.\r\n        throw new Error(\"Detection not found in database\");\r\n    }\r\n\r\n    // 2. Create PDF\r\n    const pdfDoc = await PDFDocument.create();\r\n    const timesRomanFont = await pdfDoc.embedFont(StandardFonts.TimesRoman);\r\n    const page = pdfDoc.addPage();\r\n    const { width, height } = page.getSize();\r\n\r\n    // 3. Add Content\r\n    const fontSize = 12;\r\n    const margin = 50;\r\n    let yPosition = height - margin;\r\n\r\n    const drawText = (text: string, size = fontSize, color = rgb(0, 0, 0)) => {\r\n        page.drawText(text, {\r\n            x: margin,\r\n            y: yPosition,\r\n            size,\r\n            font: timesRomanFont,\r\n            color,\r\n        });\r\n        yPosition -= size + 10;\r\n    };\r\n\r\n    drawText('FIRST INFORMATION REPORT (FIR)', 20, rgb(1, 0, 0));\r\n    yPosition -= 10;\r\n    drawText(`Report Generated: ${new Date().toISOString()}`, 10);\r\n    yPosition -= 20;\r\n\r\n    drawText(`Violation ID: ${detection.id}`);\r\n    drawText(`Detection Time: ${detection.detected_at}`);\r\n    drawText(`Location: ${detection.lat}, ${detection.lng}`);\r\n    drawText(`Zone: ${detection.zone_name}`);\r\n    yPosition -= 10;\r\n\r\n    drawText('LEGAL VIOLATIONS:', 14, rgb(0, 0, 1));\r\n    drawText(`Law: ${detection.violation_type}`);\r\n    drawText(`Article: ${detection.article || 'N/A'}`);\r\n    drawText(`Section: ${detection.section}`);\r\n    drawText(`Severity: ${detection.severity}`, 12, detection.severity === 'CRITICAL' ? rgb(1, 0, 0) : rgb(0, 0, 0));\r\n    drawText(`Penalty: ${detection.penalty_type || 'N/A'}`);\r\n    drawText(`Jurisdiction: ${detection.jurisdiction || 'N/A'}`);\r\n    yPosition -= 20;\r\n\r\n    drawText('FORENSIC EVIDENCE (FUSION ENGINE):', 14, rgb(0, 0, 1));\r\n    drawText(`Source: Multi-Spectral Fusion (ISRO Cartosat + Sentinel-1/2)`);\r\n    drawText(`AI Confidence: ${(detection.confidence * 100).toFixed(2)}% (DRDO-Logic Verified)`);\r\n    drawText(`Blockchain Tx Hash: ${detection.transaction_hash || 'PENDING'}`);\r\n    drawText(`Media Evidence Hash: ${detection.evidence_hash || 'N/A'}`);\r\n    yPosition -= 20;\r\n\r\n    drawText('Authorized By: CodeGenesis Neuro-Symbolic Gate', 10);\r\n\r\n    // 4. Save/Export\r\n    const pdfBytes = await pdfDoc.save();\r\n    return pdfBytes;\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\hyp\\src\\lib\\governance\\moat.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":31,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":31,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1081,1084],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1081,1084],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { point } from '@turf/helpers';\r\nimport booleanPointInPolygon from '@turf/boolean-point-in-polygon';\r\nimport buffer from '@turf/buffer';\r\nimport cadastralData from '../../data/mock_cadastral_data.json';\r\n\r\n// Define the return type structure explicitly as requested\r\nexport interface LegalVerdict {\r\n    isViolation: boolean;\r\n    law: string;\r\n    article: string;\r\n    section: string;\r\n    severity: 'CRITICAL' | 'HIGH' | 'INFO';\r\n    zone: string;\r\n    penalty_type: string;\r\n    jurisdiction: string;\r\n}\r\n\r\n/**\r\n * Checks if a given coordinate falls within any protected zone.\r\n * Uses Turf.js for point-in-polygon implementation.\r\n * @param lat Latitude\r\n * @param lng Longitude\r\n */\r\nexport const checkGeoCompliance = (lat: number, lng: number): LegalVerdict => {\r\n    const pt = point([lng, lat]); // Turf uses [lng, lat]\r\n\r\n    for (const feature of cadastralData.features) {\r\n        if (!feature.geometry || feature.geometry.type !== 'Polygon') continue;\r\n\r\n        // Cast feature to any to bypass strict GeoJSON type mismatches\r\n        const poly = feature as any;\r\n\r\n        // 1. Direct Intersection Check\r\n        if (booleanPointInPolygon(pt, poly)) {\r\n            const props = feature.properties;\r\n            return {\r\n                isViolation: true,\r\n                law: props.law,\r\n                article: props.article || \"N/A\",\r\n                section: props.section,\r\n                severity: props.severity as 'CRITICAL' | 'HIGH',\r\n                zone: props.name,\r\n                penalty_type: \"Immediate Sealing\",\r\n                jurisdiction: \"Supreme Court of India\"\r\n            };\r\n        }\r\n\r\n        // 2. Buffer Zone Check (100m)\r\n        // buffer(geo, radius, { units: 'kilometers' }) -> 0.1km = 100m\r\n        const bufferedPoly = buffer(poly, 0.1, { units: 'kilometers' });\r\n        if (bufferedPoly && booleanPointInPolygon(pt, bufferedPoly)) {\r\n            const props = feature.properties;\r\n            // If outside the core zone but inside buffer, it's HIGH RISK\r\n            return {\r\n                isViolation: true,\r\n                law: props.law,\r\n                article: `${props.article} (Buffer Zone)`,\r\n                section: `${props.section} - 100m Buffer`,\r\n                severity: 'HIGH', // Downgraded from potentially CRITICAL\r\n                zone: `${props.name} (Buffer)`,\r\n                penalty_type: \"Notice & Fine\",\r\n                jurisdiction: \"Local Magistrate\"\r\n            };\r\n        }\r\n    }\r\n\r\n    // Default: No Violation found\r\n    return {\r\n        isViolation: false,\r\n        law: \"N/A\",\r\n        article: \"N/A\",\r\n        section: \"N/A\",\r\n        severity: \"INFO\",\r\n        zone: \"Unregulated Zone\",\r\n        penalty_type: \"None\",\r\n        jurisdiction: \"N/A\"\r\n    };\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\hyp\\src\\lib\\governance\\moat_db.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\hyp\\src\\lib\\supabase\\client.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":11,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":11,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[411,414],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[411,414],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'query' is defined but never used.","line":15,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'column' is defined but never used.","line":16,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":28},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'value' is defined but never used.","line":16,"column":38,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":43},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":16,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[658,661],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[658,661],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'col' is defined but never used.","line":18,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":32},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'opts' is defined but never used.","line":18,"column":42,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":46},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":18,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[789,792],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[789,792],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'n' is defined but never used.","line":19,"column":33,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":34},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'type' is defined but never used.","line":25,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'filter' is defined but never used.","line":25,"column":32,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":38},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":25,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":25,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1039,1042],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1039,1042],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'callback' is defined but never used.","line":25,"column":45,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":53},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":25,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":25,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1054,1057],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1054,1057],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":30,"column":10,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":30,"endColumn":13,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1292,1295],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1292,1295],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createClient } from '@supabase/supabase-js';\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;\r\nconst supabaseKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;\r\n\r\nconst createMockClient = () => {\r\n    console.warn(\"⚠️ Supabase credentials not found. Using mock client. Realtime features will not work.\");\r\n\r\n    return {\r\n        from: (table: string) => ({\r\n            insert: async (data: any) => {\r\n                console.log(`[Mock Supabase] Inserting into ${table}:`, data);\r\n                return { data: null, error: null };\r\n            },\r\n            select: (query: string) => ({\r\n                eq: (column: string, value: any) => ({\r\n                    single: async () => ({ data: null, error: null }),\r\n                    order: (col: string, opts: any) => ({\r\n                        limit: (n: number) => async () => ({ data: [], error: null })\r\n                    })\r\n                })\r\n            })\r\n        }),\r\n        channel: (name: string) => ({\r\n            on: (type: string, filter: any, callback: any) => ({\r\n                subscribe: () => console.log(`[Mock Supabase] Subscribed to channel: ${name}`)\r\n            }),\r\n            subscribe: () => console.log(`[Mock Supabase] Subscribed to channel: ${name}`)\r\n        })\r\n    } as any;\r\n};\r\n\r\nexport const supabase = (supabaseUrl && supabaseKey)\r\n    ? (() => {\r\n        console.log(\"[Supabase] Initializing with URL:\", supabaseUrl?.slice(0, 20) + \"...\");\r\n        return createClient(supabaseUrl, supabaseKey);\r\n    })()\r\n    : createMockClient();\r\n","usedDeprecatedRules":[]}]